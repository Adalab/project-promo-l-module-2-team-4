"use strict";const collapsableHeaders=document.querySelectorAll(".js-collapsable-header");for(const e of collapsableHeaders)e.addEventListener("click",changeCollapsable);function changeCollapsable(e){const t=e.currentTarget.parentNode,l=document.querySelectorAll(".js-collapsable");for(const e of l)t===e?e.classList.toggle("collapsable--close"):e.classList.add("collapsable--close")}const nameElement=document.querySelector(".js-name"),namePreviewElement=document.querySelector(".js-preview-name"),jobElement=document.querySelector(".js-job"),jobPreviewElement=document.querySelector(".js-preview-job"),emailElement=document.querySelector(".js-email");let emailPreviewElement=document.querySelector(".js-preview-email");const telElement=document.querySelector(".js-tel");let telPreviewElement=document.querySelector(".js-preview-tel");function handleName(e){const t=e.target.value;namePreviewElement.innerHTML=""===t?"Nombre Apellido":t,saveInLocalStorage()}function handleJob(e){const t=e.target.value;jobPreviewElement.innerHTML=""===t?"Front-End Developer":t,saveInLocalStorage()}function handleEmail(e){const t=e.target.value;""===t?(emailPreviewElement.href="",emailPreviewElement.parentNode.classList.add("hidden")):(emailPreviewElement.href="mailto:"+t,emailPreviewElement.title="mailto:"+t,emailPreviewElement.parentNode.classList.remove("hidden")),saveInLocalStorage()}function handleTel(e){const t=e.target.value;""===t?(telPreviewElement.href="tel:+34 666666666",telPreviewElement.parentNode.classList.add("hidden")):(telPreviewElement.href="tel:"+t,telPreviewElement.title="tel:"+t,telPreviewElement.parentNode.classList.remove("hidden")),saveInLocalStorage()}nameElement.addEventListener("keyup",handleName),jobElement.addEventListener("keyup",handleJob),emailElement.addEventListener("keyup",handleEmail),telElement.addEventListener("keyup",handleTel);const linkedinElement=document.querySelector(".js-linkedin"),linkedinPreviewElement=document.querySelector(".js-preview-linkedin"),githubElement=document.querySelector(".js-github"),githubPreviewElement=document.querySelector(".js-preview-github");function handleLinkedin(){const e=linkedinElement.value;""===e?(linkedinPreviewElement.href="",linkedinPreviewElement.parentNode.classList.add("hidden")):(linkedinPreviewElement.href=`https://www.linkedin.com/in/${e}/`,linkedinPreviewElement.target="_blank",linkedinPreviewElement.title=e,linkedinPreviewElement.parentNode.classList.remove("hidden")),saveInLocalStorage()}function handleGithub(){const e=githubElement.value;""===e?(githubPreviewElement.href="",githubPreviewElement.parentNode.classList.add("hidden")):(githubPreviewElement.href="https://github.com/"+e,githubPreviewElement.target="_blank",githubPreviewElement.title=e,githubPreviewElement.parentNode.classList.remove("hidden")),saveInLocalStorage()}linkedinElement.addEventListener("keyup",handleLinkedin),githubElement.addEventListener("keyup",handleGithub);const fr=new FileReader,uploadBtn=document.querySelector(".js__profile-trigger"),fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview");let photo="";function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){photo=fr.result,updatePhoto(),saveInLocalStorage()}function updatePhoto(){const e=photo||"./assets/images/lee.jpg";profilePreview.style.backgroundImage=`url(${e})`,profileImage.style.backgroundImage=`url(${e})`}function fakeFileClick(){fileField.click()}function getUserData(){return{photo:photo,palette:document.querySelector(".js_palette-select:checked").value,name:document.querySelector(".js-name").value,job:document.querySelector(".js-job").value,email:document.querySelector(".js-email").value,phone:document.querySelector(".js-tel").value,linkedin:document.querySelector(".js-linkedin").value,github:document.querySelector(".js-github").value}}function saveInLocalStorage(){const e=getUserData(),t=JSON.stringify(e);localStorage.setItem("userData",t)}function getFromLocalStorage(){const e=localStorage.getItem("userData");if(null!==e){const t=JSON.parse(e);document.querySelector(".js-name").value=t.name,document.querySelector(".js-job").value=t.job,document.querySelector(".js-email").value=t.email,document.querySelector(".js-tel").value=t.phone,document.querySelector(".js-linkedin").value=t.linkedin,document.querySelector(".js-github").value=t.github,photo=t.photo;const l=document.querySelectorAll(".js_palette-select");for(const e of l)e.value===t.palette&&(e.checked=!0);updateAllInputs(),handlePalette(),updatePhoto()}}uploadBtn.addEventListener("click",fakeFileClick),fileField.addEventListener("change",getImage);const createBtn=document.querySelector(".js-create-btn"),cardResultElement=document.querySelector(".js-card-result"),linkElement=document.querySelector(".confirm__share--link"),titleElement=document.querySelector(".confirm__share--title");function handleCreateBtn(e){e.preventDefault();const t=getUserData();fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{!0===e.success?(titleElement.innerHTML="La tarjeta ha sido creada:",linkElement.href=e.cardURL,linkElement.innerHTML=e.cardURL,cardResultElement.classList.remove("share-hidden")):(titleElement.innerHTML=e.error,linkElement.href="",linkElement.innerHTML="",cardResultElement.classList.remove("share-hidden"))})}function resetLink(){cardResultElement.classList.add("share-hidden"),linkElement.innerHTML="",linkElement.href=""}createBtn.addEventListener("click",handleCreateBtn);const inputsTextConfig=[{inputClass:".js-name",cardClass:".js-preview-name",defaultValue:"Nombre apellidos",cardPrefix:"",cardElementAttribute:"innerHTML"},{inputClass:".js-job",cardClass:".js-preview-job",defaultValue:"Programadora front end",cardPrefix:"",cardElementAttribute:"innerHTML"},{inputClass:".js-email",cardClass:".js-preview-email",defaultValue:"nombre.apellido@example.com",cardPrefix:"",cardElementAttribute:"href"},{inputClass:".js-tel",cardClass:".js-preview-tel",defaultValue:"",cardPrefix:"",cardElementAttribute:"href"},{inputClass:".js-linkedin",cardClass:".js-preview-linkedin",defaultValue:"",cardPrefix:"https://www.linkedin.com/in/",cardElementAttribute:"href"},{inputClass:".js-github",cardClass:".js-preview-github",defaultValue:"",cardPrefix:"https://github.com/",cardElementAttribute:"href"}];function updateAllInputs(){for(const e of inputsTextConfig){const t=document.querySelector(e.inputClass),l=document.querySelector(e.cardClass);let n=t.value;"innerHTML"===e.cardElementAttribute?(n=""===t.value?e.defaultValue:t.value,l.innerHTML=n):"href"===e.cardElementAttribute&&(""===t.value?(n="#",l.parentNode.classList.add("hidden")):(n=n.replace(e.cardPrefix,""),n=e.cardPrefix+n,l.parentNode.classList.remove("hidden")),l.href=n)}saveInLocalStorage()}const inputTextElements=document.querySelectorAll(".js-input-text");for(const e of inputTextElements)e.addEventListener("keyup",updateAllInputs);const paletteInputElement=document.querySelectorAll(".js_palette-select"),cardPreviewElement=document.querySelector(".js_preview-card");function handlePalette(){cardPreviewElement.classList.remove("palette-1","palette-2","palette-3");let e=document.querySelector(".js_palette-select:checked").value;cardPreviewElement.classList.add("palette-"+e),saveInLocalStorage()}for(const e of paletteInputElement)e.addEventListener("change",handlePalette);const resetBtn=document.querySelector(".js-reset"),form=document.querySelector(".js-form"),logoListItems=document.querySelectorAll(".js-logo-list");function handleReset(){form.reset(),profileImage.removeAttribute("style"),profilePreview.removeAttribute("style");const e=document.querySelectorAll(".js_palette-select");for(const t of e)"1"===t.value&&(t.checked=!0);for(const e of logoListItems)e.classList.add("hidden");updateAllInputs(),handlePalette(),resetLink(),localStorage.removeItem("userData")}resetBtn.addEventListener("click",handleReset),getFromLocalStorage(),updateAllInputs(),handlePalette(),updatePhoto();